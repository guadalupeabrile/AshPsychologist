'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var lax = require('lax.js');
var React = require('react');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

function _interopNamespace(e) {
  if (e && e.__esModule) return e;
  var n = Object.create(null);
  if (e) {
    Object.keys(e).forEach(function (k) {
      if (k !== 'default') {
        var d = Object.getOwnPropertyDescriptor(e, k);
        Object.defineProperty(n, k, d.get ? d : {
          enumerable: true,
          get: function () { return e[k]; }
        });
      }
    });
  }
  n["default"] = e;
  return Object.freeze(n);
}

var lax__default = /*#__PURE__*/_interopDefaultLegacy(lax);
var React__namespace = /*#__PURE__*/_interopNamespace(React);

function useLax(_temp) {
  var _ref = _temp === void 0 ? {} : _temp,
      drivers = _ref.drivers,
      elements = _ref.elements;

  React__namespace.useEffect(function () {
    if (!window.lax) {
      window.lax = lax__default["default"];
    }
  }, []);
  React__namespace.useEffect(function () {
    lax__default["default"].init();

    if (drivers != null && drivers.length) {
      drivers.forEach(function (_ref2) {
        var name = _ref2.name,
            getValueFn = _ref2.getValueFn,
            options = _ref2.options;
        lax__default["default"].addDriver(name, getValueFn, options);
      });
    }

    if (elements != null && elements.length) {
      elements.forEach(function (_ref3) {
        var selector = _ref3.selector,
            animationData = _ref3.animationData,
            options = _ref3.options;
        lax__default["default"].addElements(selector, animationData, options);
      });
    }
  }, []);
}

function useLaxElement(_temp2) {
  var _ref4 = _temp2 === void 0 ? {} : _temp2,
      animationData = _ref4.animationData,
      options = _ref4.options;

  var ref = React__namespace.useRef();
  React__namespace.useEffect(function () {
    var currentNode = ref.current;

    if (currentNode) {
      lax__default["default"].addElement(currentNode, animationData, options);
    }

    return function () {
      if (currentNode) {
        lax__default["default"].removeElement(currentNode);
      }
    };
  }, []);
  return ref;
}

exports.useLax = useLax;
exports.useLaxElement = useLaxElement;
